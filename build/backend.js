!function(){"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}var t=window.wp.element,o=window.lodash;const r=[{value:"px",label:"px",default:0},{value:"%",label:"%",default:0},{value:"em",label:"em",default:0},{value:"rem",label:"rem",default:0}],l=e=>e&&(e.top||e.right||e.bottom||e.left||e.topLeft||e.topRight||e.bottomRight||e.bottomLeft),n=e=>{if(e){const t=Object.values(e);return t.every((e=>e===t[0]))}return!1},a=e=>{let t={};if(e.backgroundSizing&&(t.backgroundSize="percent"===e.backgroundSizing?`${e.backgroundSizingPercent}%`:e.backgroundSizing),e.backgroundPosition&&(t.backgroundPosition=`${100*e.backgroundPosition.x}% ${100*e.backgroundPosition.y}%`),e.backgroundImage&&(t.backgroundImage=`url("${e.backgroundImage}")`),l(e.padding)&&(n(e.padding)?t.padding=e.padding.top:t={...t,paddingTop:e.padding.top,paddingRight:e.padding.right,paddingBottom:e.padding.bottom,paddingLeft:e.padding.left}),l(e.borderWidth)&&(n(e.borderWidth)?t.borderWidth=e.borderWidth.top:t={...t,borderTopWidth:e.borderWidth.top,borderRightWidth:e.borderWidth.right,borderBottomWidth:e.borderWidth.bottom,borderLeftWidth:e.borderWidth.left}),e.borderColor&&(t.borderColor=e.borderColor),e.shadowColor||e.shadowOffsetX||e.shadowOffsetY||e.shadowRadius){const o=[e.shadowOffsetX||0,e.shadowOffsetY||0,e.shadowRadius||0,e.shadowColor||"transparent"];t.boxShadow=o.join(" ")}return l(e.borderRadius)&&(n(e.borderRadius)?t.borderRadius=e.borderRadius.topLeft:t={...t,borderTopLeftRadius:e.borderRadius.topLeft,borderTopRightRadius:e.borderRadius.topRight,borderBottomRightRadius:e.borderRadius.bottomRight,borderBottomLeftRadius:e.borderRadius.bottomLeft}),{...e.style,...t}},{registerBlockType:i}=wp.blocks,{PanelBody:c,PanelRow:d,ToolbarGroup:s,ToolbarItem:u,Flex:g,Button:p,SelectControl:m,FocalPointPicker:b,RangeControl:f,__experimentalBoxControl:h,__experimentalUnitControl:k,ColorPicker:v}=wp.components,{InspectorControls:R,BlockControls:C,__experimentalBlockAlignmentMatrixToolbar:E,InnerBlocks:w,useBlockProps:B,__experimentalUseInnerBlocksProps:y,MediaUpload:z,MediaUploadCheck:P,ColorPaletteControl:T}=wp.blockEditor,{withState:I}=wp.compose,O={"top left":"is-position-top-left","top center":"is-position-top-center","top right":"is-position-top-right","center left":"is-position-center-left","center center":"is-position-center-center",center:"is-position-center-center","center right":"is-position-center-right","bottom left":"is-position-bottom-left","bottom center":"is-position-bottom-center","bottom right":"is-position-bottom-right"},x=e=>e&&"center"!==e&&"center center"!==e?O[e]:"";i("cumulus-gutenberg/imageflip-face",{apiVersion:2,title:"Flip Card Face",description:"Face container for CardFlip blocks",keywords:["image","hover","flip","imageflip","card","flipcard"],icon:{src:"format-image",foreground:"#1379ac"},parent:["cumulus-gutenberg/imageflip"],supports:{html:!1,anchor:!1,alignWide:!1,customClassName:!1,align:!1,spacing:{padding:!1},color:{gradient:!0,text:!0,background:!0}},attributes:{face:{type:"string",default:void 0},style:{type:"object",default:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"}},padding:{type:"object",default:{top:void 0,right:void 0,bottom:void 0,left:void 0}},borderColor:{type:"string"},borderWidth:{type:"object"},backgroundImage:{type:"string",default:void 0},backgroundSizing:{type:"string",default:"cover"},backgroundSizingPercent:{type:"number",default:100},backgroundPosition:{type:"object",default:{x:.5,y:.5}},contentPosition:{type:"string",default:"center"},borderRadius:{type:"object",default:{top:"0.6em",right:"0.6em",bottom:"0.6em",left:"0.6em"}},shadowOffsetX:{type:"string",default:0},shadowOffsetY:{type:"string",default:0},shadowRadius:{type:"string",default:"0.6em"},shadowColor:{type:"string",default:"rgba(0, 0, 0, 0.25)"}},usesContext:["cumulus-flipcard/borderRadius"],edit:I({showFront:!0})((e=>{const{attributes:n,context:i,setAttributes:I}=e;(0,o.isEqual)(i["cumulus-flipcard/borderRadius"],n.borderRadius)||I({borderRadius:i["cumulus-flipcard/borderRadius"]});const O=x(n.contentPosition),S=["crsg-flipcard-face-container",`crsg-flipcard-face-${n.face}`];O&&S.push(["has-custom-content-position",O]);const L=B({className:S,style:a(n)}),N=y({className:"crsg-flipcard-face"},{renderAppender:w.ButtonBlockAppender,templateLock:!1}),U=e=>{const t={...n.style,...e};I({style:t})};return(0,t.createElement)("div",L,(0,t.createElement)(C,{group:"block"},(0,t.createElement)(s,null,(0,t.createElement)(E,{label:"Set content container alignment",value:n.contentPosition,onChange:e=>I({contentPosition:e})})),(0,t.createElement)(s,null,(0,t.createElement)(u,{as:g,style:{paddingLeft:"1em",paddingRight:"1em"}},n.face.toUpperCase()))),(0,t.createElement)(R,null,(0,t.createElement)(c,{title:"Background Image",initialOpen:n.backgroundImage},(0,t.createElement)(d,null,(0,t.createElement)(P,null,(0,t.createElement)(z,{label:"Background Image",type:"image",value:n.backgroundImage,render:({open:e})=>(0,t.createElement)(g,{style:{gap:"5px",justifyContent:"flex-start",marginBottom:"5px"}},(0,t.createElement)(p,{className:"button button-large",onClick:e},n.backgroundImage?"Replace Image":"Choose Image"),n.backgroundImage&&(0,t.createElement)(p,{className:"button button-large",onClick:()=>{I({backgroundImage:void 0,backgroundImageThumb:void 0})}},"Remove")),onSelect:e=>{I({backgroundImage:e.sizes.full.url,backgroundImageThumb:e.sizes.thumbnail.url})}}))),n.backgroundImage&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(b,{url:n.backgroundImage,value:n.backgroundPosition,onChange:e=>{I({backgroundPosition:e})}}),(0,t.createElement)(m,{label:"Repeat",value:n.style.backgroundRepeat,options:[{label:"None",value:"no-repeat"},{label:"Repeat",value:"repeat"},{label:"Horizontal Only",value:"repeat-x"},{label:"Vertical Only",value:"repeat-y"}],onChange:e=>U({backgroundRepeat:e})}),(0,t.createElement)(m,{label:"Sizing Method",value:n.backgroundSizing,options:[{label:"Cover",value:"cover"},{label:"Contain",value:"contain"},{label:"Percent",value:"percent"}],onChange:e=>{I({backgroundSizing:e})}})),"percent"===n.backgroundSizing&&(0,t.createElement)(d,null,(0,t.createElement)(f,{label:"Percentage Sizing",value:n.backgroundSizingPercent,initialPosition:n.backgroundSizingPercent,resetFallbackValue:100,onChange:e=>{I({backgroundSizingPercent:e}),U(a(n))},min:0,max:200}))),(0,t.createElement)(c,{title:"Padding",initialOpen:l(n.padding)},(0,t.createElement)(h,{values:n.padding,onChange:e=>{const t={...n.padding,top:e.top,right:e.right,bottom:e.bottom,left:e.left};I({padding:t})}})),(0,t.createElement)(c,{title:"Border",initialOpen:l(n.borderWidth)},(0,t.createElement)(h,{label:"Border width",values:n.borderWidth,onChange:e=>{const t={...n.borderWidth,top:e.top,right:e.right,bottom:e.bottom,left:e.left};I({borderWidth:t})}}),(0,t.createElement)(T,{label:"Border color",value:n.borderColor,onChange:e=>I({borderColor:e})}),(0,t.createElement)("div",null,(0,t.createElement)("strong",null,"Note:"),"Border radius for the entire card is set from the parent card container.")),(0,t.createElement)(c,{title:"Shadow",initialOpen:n.shadowColor},(0,t.createElement)(d,{title:"Shadow"},(0,t.createElement)(g,null,(0,t.createElement)(k,{label:"Offset X",size:"small",units:r,value:n.shadowOffsetX,onChange:e=>I({shadowOffsetX:e})}),(0,t.createElement)(k,{label:"Offset Y",size:"small",units:r,value:n.shadowOffsetY,onChange:e=>I({shadowOffsetY:e})}),(0,t.createElement)(k,{label:"Radius",size:"small",units:r,value:n.shadowRadius,onChange:e=>I({shadowRadius:e})}))),(0,t.createElement)(d,null,(0,t.createElement)(v,{label:"Shadow color",color:n.shadowColor,onChangeComplete:e=>{I({shadowColor:e.color.toRgbString()})}})))),(0,t.createElement)("div",N,N.children))})),save:e=>{const{attributes:o}=e,r=x(o.contentPosition),l=["crsg-flipcard-face-container",`crsg-flipcard-face-${o.face}`];r&&l.push(["has-custom-content-position",r]);const n=B.save({className:l.join(" "),style:a(o)});return(0,t.createElement)("div",n,(0,t.createElement)("div",{className:"crsg-flipcard-face"},(0,t.createElement)(w.Content,null)))}});const{registerBlockType:S}=wp.blocks,{Panel:L,PanelBody:N,PanelRow:U,ToolbarGroup:W,ToolbarItem:F,DropdownMenu:_,TextControl:D,ToggleControl:j,SelectControl:A,Button:$,IconButton:H,__experimentalUnitControl:V,Flex:X}=wp.components,{InspectorControls:Y,BlockControls:M,InnerBlocks:q,useBlockProps:G,__experimentalUseInnerBlocksProps:K,__experimentalLinkControl:Z}=wp.blockEditor,{withState:J}=wp.compose,Q=S("cumulus-gutenberg/imageflip",{apiVersion:2,title:"Flip Card",description:"Gutenberg 3d flipping card block",keywords:["image","hover","flip","imageflip","card","flipcard"],category:"design",icon:{src:"format-gallery",foreground:"#3399cc"},supports:{html:!1,anchor:!0,alignWide:!1,customClassName:!1,__experimentalBorder:{radius:!0}},attributes:{linkUrl:{type:"string"},linkTarget:{type:"string"},linkTitle:{type:"string"},linkRel:{type:"string,"},flipDirection:{type:"string",default:"horizontal"},zoomOnHover:{type:"boolean",default:!0},childBorderRadius:{type:"object",default:{topLeft:"0.6em",topRight:"0.6em",bottomRight:"0.6em",bottomLeft:"0.6em"}}},providesContext:{"cumulus-flipcard/borderRadius":"childBorderRadius"},edit:J({showFront:!0})((e=>{const{showFront:l,attributes:n,setAttributes:a,setState:i}=e,c=["crsg-flipcard",`crsg-flipcard-${n.flipDirection}`,"show-face-"+(l?"front":"back")],d=G({className:c}),s=K({className:"crsg-flipcard-container",title:"CardFlip Container"},{template:[["cumulus-gutenberg/imageflip-face",{face:"front"},[]],["cumulus-gutenberg/imageflip-face",{face:"back"},[]]],templateLock:"insert"});return(0,t.createElement)("div",d,(0,t.createElement)(M,{group:"block"},(0,t.createElement)(W,null,(0,t.createElement)(F,null,(e=>(0,t.createElement)(_,{toggleProps:e,icon:`image-flip-${n.flipDirection}`,label:"Change flip direction",text:n.flipDirection.charAt(0).toUpperCase()+n.flipDirection.slice(1),controls:[{icon:"image-flip-horizontal",title:"Horizontal",isActive:"horizontal"===n.flipDirection,onClick:()=>a({flipDirection:"horizontal"})},{icon:"image-flip-vertical",title:"Vertical",isActive:"vertical"===n.flipDirection,onClick:()=>a({flipDirection:"vertical"})}]})))),(0,t.createElement)(W,null,(0,t.createElement)(F,{as:H,icon:"randomize",title:"Flip the card face",onClick:()=>i({showFront:!l})},"Viewing: ",l?"FRONT":"BACK"))),(0,t.createElement)(Y,null,(0,t.createElement)(L,null,(0,t.createElement)(N,{title:"Link"},(0,t.createElement)(Z,{label:"Link the card",value:{url:n.linkUrl,opensInNewTab:"_blank"===n.linkTarget},onChange:e=>{e||(e=void 0);const t={linkUrl:e.url,linkTitle:e.title===e.url?n.linkTitle:e.title,linkTarget:e.opensInNewTab?"_blank":void 0,linkRel:e.opensInNewTab?"noopener":void 0};a(t)}}),(0,t.createElement)(D,{label:"Link Title",value:n.linkTitle||void 0,onChange:e=>{a({linkTitle:e})}}),n.linkUrl&&(0,t.createElement)($,{className:"button button-large",onClick:()=>{a({linkUrl:Q.attributes.linkUrl.default,linkTarget:Q.attributes.linkTarget.default,linkTitle:Q.attributes.linkTitle.default,linkRel:Q.attributes.linkRel.default})}},"Unlink Card")),(0,t.createElement)(N,{title:"Flip Effect",initialOpen:!1},(0,t.createElement)(A,{label:"Direction",value:n.flipDirection,onChange:e=>a({flipDirection:e}),options:[{value:"horizontal",label:"Horizontal"},{value:"vertical",label:"Vertical"}]}),(0,t.createElement)(j,{label:"Zoom",checked:n.zoomOnHover,onChange:e=>{a({zoomOnHover:e})}})),(0,t.createElement)(N,{title:"Border Radius",initialOpen:!(0,o.isEqual)(n.childBorderRadius,Q.attributes.childBorderRadius.default)},(0,t.createElement)(U,null,(0,t.createElement)(X,null,(0,t.createElement)(V,{label:"TL ┏",size:"small",units:r,value:n.childBorderRadius.topLeft,onChange:e=>{const t={...n.childBorderRadius,topLeft:e};a({childBorderRadius:t})}}),(0,t.createElement)(V,{label:"TR ┓",size:"small",units:r,value:n.childBorderRadius.topRight,onChange:e=>{const t={...n.childBorderRadius,topRight:e};a({childBorderRadius:t})}}),(0,t.createElement)(V,{label:"BR ┛",size:"small",units:r,value:n.childBorderRadius.bottomRight,onChange:e=>{const t={...n.childBorderRadius,bottomRight:e};a({childBorderRadius:t})}}),(0,t.createElement)(V,{label:"BL ┗",size:"small",units:r,value:n.childBorderRadius.bottomLeft,onChange:e=>{const t={...n.childBorderRadius,bottomLeft:e};a({childBorderRadius:t})}}))),(0,t.createElement)(U,null,!(0,o.isEqual)(n.childBorderRadius,Q.attributes.childBorderRadius.default)&&(0,t.createElement)($,{className:"button button-small",onClick:()=>{a({childBorderRadius:Q.attributes.childBorderRadius.default})}},"Reset"))))),(0,t.createElement)("div",s,s.children))})),save:o=>{const{attributes:r}=o,l=["crsg-flipcard",`crsg-flipcard-${r.flipDirection}`];r.zoomOnHover&&l.push("has-zoom-on-hover");let n={};r.linkUrl&&(n={href:r.linkUrl,target:r.linkTarget,title:r.linkTitle,rel:r.linkRel});const a=G.save({className:l.join(" "),...n});return(0,t.createElement)((e=>e.isLink?(0,t.createElement)("a",e,e.children):(0,t.createElement)("div",e,e.children)),e({isLink:r.linkUrl&&r.linkUrl.length>0},a),(0,t.createElement)("div",{className:"crsg-flipcard-container"},(0,t.createElement)(q.Content,null)))}})}();