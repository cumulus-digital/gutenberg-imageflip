(()=>{"use strict";const e=window.wp.element,t=window.lodash,o=[{value:"px",label:"px",default:0},{value:"%",label:"%",default:0},{value:"em",label:"em",default:0},{value:"rem",label:"rem",default:0}],l=e=>e&&(e.top||e.right||e.bottom||e.left||e.topLeft||e.topRight||e.bottomRight||e.bottomLeft),r=e=>{if(e){const t=Object.values(e);return t.every((e=>e===t[0]))}return!1},a=e=>{let t={};if(e.backgroundSizing&&(t.backgroundSize="percent"===e.backgroundSizing?`${e.backgroundSizingPercent}%`:e.backgroundSizing),e.backgroundPosition&&(t.backgroundPosition=`${100*e.backgroundPosition.x}% ${100*e.backgroundPosition.y}%`),e.backgroundImage&&(t.backgroundImage=`url("${e.backgroundImage}")`),l(e.padding)&&(r(e.padding)?t.padding=e.padding.top:t={...t,paddingTop:e.padding.top,paddingRight:e.padding.right,paddingBottom:e.padding.bottom,paddingLeft:e.padding.left}),l(e.borderWidth)&&(r(e.borderWidth)?t.borderWidth=e.borderWidth.top:t={...t,borderTopWidth:e.borderWidth.top,borderRightWidth:e.borderWidth.right,borderBottomWidth:e.borderWidth.bottom,borderLeftWidth:e.borderWidth.left}),e.borderColor&&(t.borderColor=e.borderColor),e.shadowColor||e.shadowOffsetX||e.shadowOffsetY||e.shadowRadius){const o=[e.shadowOffsetX||0,e.shadowOffsetY||0,e.shadowRadius||0,e.shadowColor||"transparent"];t.boxShadow=o.join(" ")}return l(e.borderRadius)&&(r(e.borderRadius)?t.borderRadius=e.borderRadius.topLeft:t={...t,borderTopLeftRadius:e.borderRadius.topLeft,borderTopRightRadius:e.borderRadius.topRight,borderBottomRightRadius:e.borderRadius.bottomRight,borderBottomLeftRadius:e.borderRadius.bottomLeft}),{...e.style,...t}},{registerBlockType:n}=wp.blocks,{PanelBody:i,PanelRow:c,ToolbarGroup:d,ToolbarItem:s,Flex:u,Button:g,SelectControl:p,FocalPointPicker:m,RangeControl:b,__experimentalBoxControl:f,__experimentalUnitControl:h,ColorPicker:k}=wp.components,{InspectorControls:R,BlockControls:v,__experimentalBlockAlignmentMatrixControl:C,InnerBlocks:E,useBlockProps:B,useInnerBlocksProps:w,MediaUpload:y,MediaUploadCheck:z,ColorPaletteControl:P}=wp.blockEditor,{useState:T}=wp.element,{withState:I}=wp.compose,S={"top left":"is-position-top-left","top center":"is-position-top-center","top right":"is-position-top-right","center left":"is-position-center-left","center center":"is-position-center-center",center:"is-position-center-center","center right":"is-position-center-right","bottom left":"is-position-bottom-left","bottom center":"is-position-bottom-center","bottom right":"is-position-bottom-right"},x=e=>e&&"center"!==e&&"center center"!==e?S[e]:"";n("cumulus-gutenberg/imageflip-face",{apiVersion:2,title:"Flip Card Face",description:"Face container for CardFlip blocks",keywords:["image","hover","flip","imageflip","card","flipcard"],icon:{src:"format-image",foreground:"#1379ac"},parent:["cumulus-gutenberg/imageflip"],supports:{html:!1,anchor:!1,alignWide:!1,customClassName:!1,align:!1,spacing:{padding:!1},color:{gradient:!0,text:!0,background:!0}},attributes:{face:{type:"string",default:void 0},style:{type:"object",default:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"}},padding:{type:"object",default:{top:void 0,right:void 0,bottom:void 0,left:void 0}},borderColor:{type:"string"},borderWidth:{type:"object"},backgroundImage:{type:"string",default:void 0},backgroundSizing:{type:"string",default:"cover"},backgroundSizingPercent:{type:"number",default:100},backgroundPosition:{type:"object",default:{x:.5,y:.5}},contentPosition:{type:"string",default:"center center"},borderRadius:{type:"object",default:{top:"0.6em",right:"0.6em",bottom:"0.6em",left:"0.6em"}},shadowOffsetX:{type:"string",default:0},shadowOffsetY:{type:"string",default:0},shadowRadius:{type:"string",default:"0.6em"},shadowColor:{type:"string",default:"rgba(0, 0, 0, 0.25)"}},usesContext:["cumulus-flipcard/borderRadius"],edit:r=>{const{attributes:n,context:T,setAttributes:I}=r;(0,t.isEqual)(T["cumulus-flipcard/borderRadius"],n.borderRadius)||I({borderRadius:T["cumulus-flipcard/borderRadius"]});const S=x(n.contentPosition),L=["crsg-flipcard-face-container",`crsg-flipcard-face-${n.face}`];S&&L.push(["has-custom-content-position",S]);const O=B({className:L,style:a(n)}),N=w({className:"crsg-flipcard-face"},{renderAppender:E.ButtonBlockAppender,templateLock:!1}),W=e=>{const t={...n.style,...e};I({style:t})};return(0,e.createElement)("div",{...O},(0,e.createElement)(v,{group:"block"},(0,e.createElement)(d,null,(0,e.createElement)(C,{label:"Set content container alignment",value:n.contentPosition,onChange:e=>I({contentPosition:e})})),(0,e.createElement)(d,null,(0,e.createElement)(s,{as:u,style:{paddingLeft:"1em",paddingRight:"1em"}},n.face.toUpperCase()))),(0,e.createElement)(R,null,(0,e.createElement)(i,{title:"Background Image",initialOpen:n.backgroundImage},(0,e.createElement)(c,null,(0,e.createElement)(z,null,(0,e.createElement)(y,{label:"Background Image",type:"image",value:n.backgroundImage,render:({open:t})=>(0,e.createElement)(u,{style:{gap:"5px",justifyContent:"flex-start",marginBottom:"5px"}},(0,e.createElement)(g,{className:"button button-large",onClick:t},n.backgroundImage?"Replace Image":"Choose Image"),n.backgroundImage&&(0,e.createElement)(g,{className:"button button-large",onClick:()=>{I({backgroundImage:void 0,backgroundImageThumb:void 0})}},"Remove")),onSelect:e=>{I({backgroundImage:e.sizes.full.url,backgroundImageThumb:e.sizes.thumbnail.url})}}))),n.backgroundImage&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(m,{url:n.backgroundImage,value:n.backgroundPosition,onChange:e=>{I({backgroundPosition:e})}}),(0,e.createElement)(p,{label:"Repeat",value:n.style.backgroundRepeat,options:[{label:"None",value:"no-repeat"},{label:"Repeat",value:"repeat"},{label:"Horizontal Only",value:"repeat-x"},{label:"Vertical Only",value:"repeat-y"}],onChange:e=>W({backgroundRepeat:e})}),(0,e.createElement)(p,{label:"Sizing Method",value:n.backgroundSizing,options:[{label:"Cover",value:"cover"},{label:"Contain",value:"contain"},{label:"Percent",value:"percent"}],onChange:e=>{I({backgroundSizing:e})}})),"percent"===n.backgroundSizing&&(0,e.createElement)(c,null,(0,e.createElement)(b,{label:"Percentage Sizing",value:n.backgroundSizingPercent,initialPosition:n.backgroundSizingPercent,resetFallbackValue:100,onChange:e=>{I({backgroundSizingPercent:e}),W(a(n))},min:0,max:200}))),(0,e.createElement)(i,{title:"Padding",initialOpen:l(n.padding)},(0,e.createElement)(f,{values:n.padding,onChange:e=>{const t={...n.padding,top:e.top,right:e.right,bottom:e.bottom,left:e.left};I({padding:t})}})),(0,e.createElement)(i,{title:"Border",initialOpen:l(n.borderWidth)},(0,e.createElement)(f,{label:"Border width",values:n.borderWidth,onChange:e=>{const t={...n.borderWidth,top:e.top,right:e.right,bottom:e.bottom,left:e.left};I({borderWidth:t})}}),(0,e.createElement)(P,{label:"Border color",value:n.borderColor,onChange:e=>I({borderColor:e})}),(0,e.createElement)("div",null,(0,e.createElement)("strong",null,"Note:"),"Border radius for the entire card is set from the parent card container.")),(0,e.createElement)(i,{title:"Shadow",initialOpen:n.shadowColor},(0,e.createElement)(c,{title:"Shadow"},(0,e.createElement)(u,null,(0,e.createElement)(h,{label:"Offset X",size:"small",units:o,value:n.shadowOffsetX,onChange:e=>I({shadowOffsetX:e})}),(0,e.createElement)(h,{label:"Offset Y",size:"small",units:o,value:n.shadowOffsetY,onChange:e=>I({shadowOffsetY:e})}),(0,e.createElement)(h,{label:"Radius",size:"small",units:o,value:n.shadowRadius,onChange:e=>I({shadowRadius:e})}))),(0,e.createElement)(c,null,(0,e.createElement)(k,{label:"Shadow color",color:n.shadowColor,onChangeComplete:e=>{I({shadowColor:e.color.toRgbString()})}})))),(0,e.createElement)("div",{...N},N.children))},save:t=>{const{attributes:o}=t,l=x(o.contentPosition),r=["crsg-flipcard-face-container",`crsg-flipcard-face-${o.face}`];l&&r.push(["has-custom-content-position",l]);const n=B.save({className:r.join(" "),style:a(o)});return(0,e.createElement)("div",{...n},(0,e.createElement)("div",{className:"crsg-flipcard-face"},(0,e.createElement)(E.Content,null)))}});const{registerBlockType:L}=wp.blocks,{Panel:O,PanelBody:N,PanelRow:W,ToolbarGroup:U,ToolbarItem:D,DropdownMenu:F,TextControl:_,ToggleControl:j,SelectControl:A,Button:$,IconButton:H,__experimentalUnitControl:V,Flex:X}=wp.components,{InspectorControls:Y,BlockControls:M,InnerBlocks:q,useBlockProps:G,useInnerBlocksProps:K,__experimentalLinkControl:Z}=wp.blockEditor,{useState:J}=wp.element,Q=L("cumulus-gutenberg/imageflip",{apiVersion:2,title:"Flip Card",description:"Gutenberg 3d flipping card block",keywords:["image","hover","flip","imageflip","card","flipcard"],category:"design",icon:{src:"format-gallery",foreground:"#3399cc"},supports:{html:!1,anchor:!0,alignWide:!1,customClassName:!1,__experimentalBorder:{radius:!0}},attributes:{linkUrl:{type:"string"},linkTarget:{type:"string"},linkTitle:{type:"string"},linkRel:{type:"string,"},flipDirection:{type:"string",default:"horizontal"},zoomOnHover:{type:"boolean",default:!0},childBorderRadius:{type:"object",default:{topLeft:"0.6em",topRight:"0.6em",bottomRight:"0.6em",bottomLeft:"0.6em"}}},providesContext:{"cumulus-flipcard/borderRadius":"childBorderRadius"},edit:l=>{const[r,a]=J(!0),{attributes:n,setAttributes:i,setState:c}=l,d=["crsg-flipcard",`crsg-flipcard-${n.flipDirection}`,"show-face-"+(r?"front":"back")],s=G({className:d}),u=K({className:"crsg-flipcard-container",title:"CardFlip Container"},{template:[["cumulus-gutenberg/imageflip-face",{face:"front"},[]],["cumulus-gutenberg/imageflip-face",{face:"back"},[]]],templateLock:"insert"});return(0,e.createElement)("div",{...s},(0,e.createElement)(M,{group:"block"},(0,e.createElement)(U,null,(0,e.createElement)(D,null,(t=>(0,e.createElement)(F,{toggleProps:t,icon:`image-flip-${n.flipDirection}`,label:"Change flip direction",text:n.flipDirection.charAt(0).toUpperCase()+n.flipDirection.slice(1),controls:[{icon:"image-flip-horizontal",title:"Horizontal",isActive:"horizontal"===n.flipDirection,onClick:()=>i({flipDirection:"horizontal"})},{icon:"image-flip-vertical",title:"Vertical",isActive:"vertical"===n.flipDirection,onClick:()=>i({flipDirection:"vertical"})}]})))),(0,e.createElement)(U,null,(0,e.createElement)(D,{as:H,icon:"randomize",title:"Flip the card face",onClick:()=>a(!r)},"Viewing: ",r?"FRONT":"BACK"))),(0,e.createElement)(Y,null,(0,e.createElement)(O,null,(0,e.createElement)(N,{title:"Link"},(0,e.createElement)(Z,{label:"Link the card",value:{url:n.linkUrl,opensInNewTab:"_blank"===n.linkTarget},onChange:e=>{e||(e=void 0);const t={linkUrl:e.url,linkTitle:e.title===e.url?n.linkTitle:e.title,linkTarget:e.opensInNewTab?"_blank":void 0,linkRel:e.opensInNewTab?"noopener":void 0};i(t)}}),(0,e.createElement)(_,{label:"Link Title",value:n.linkTitle||void 0,onChange:e=>{i({linkTitle:e})}}),n.linkUrl&&(0,e.createElement)($,{className:"button button-large",onClick:()=>{i({linkUrl:Q.attributes.linkUrl.default,linkTarget:Q.attributes.linkTarget.default,linkTitle:Q.attributes.linkTitle.default,linkRel:Q.attributes.linkRel.default})}},"Unlink Card")),(0,e.createElement)(N,{title:"Flip Effect",initialOpen:!1},(0,e.createElement)(A,{label:"Direction",value:n.flipDirection,onChange:e=>i({flipDirection:e}),options:[{value:"horizontal",label:"Horizontal"},{value:"vertical",label:"Vertical"}]}),(0,e.createElement)(j,{label:"Zoom",checked:n.zoomOnHover,onChange:e=>{i({zoomOnHover:e})}})),(0,e.createElement)(N,{title:"Border Radius",initialOpen:!(0,t.isEqual)(n.childBorderRadius,Q.attributes.childBorderRadius.default)},(0,e.createElement)(W,null,(0,e.createElement)(X,null,(0,e.createElement)(V,{label:"TL ┏",size:"small",units:o,value:n.childBorderRadius.topLeft,onChange:e=>{const t={...n.childBorderRadius,topLeft:e};i({childBorderRadius:t})}}),(0,e.createElement)(V,{label:"TR ┓",size:"small",units:o,value:n.childBorderRadius.topRight,onChange:e=>{const t={...n.childBorderRadius,topRight:e};i({childBorderRadius:t})}}),(0,e.createElement)(V,{label:"BR ┛",size:"small",units:o,value:n.childBorderRadius.bottomRight,onChange:e=>{const t={...n.childBorderRadius,bottomRight:e};i({childBorderRadius:t})}}),(0,e.createElement)(V,{label:"BL ┗",size:"small",units:o,value:n.childBorderRadius.bottomLeft,onChange:e=>{const t={...n.childBorderRadius,bottomLeft:e};i({childBorderRadius:t})}}))),(0,e.createElement)(W,null,!(0,t.isEqual)(n.childBorderRadius,Q.attributes.childBorderRadius.default)&&(0,e.createElement)($,{className:"button button-small",onClick:()=>{i({childBorderRadius:Q.attributes.childBorderRadius.default})}},"Reset"))))),(0,e.createElement)("div",{...u},u.children))},save:t=>{const{attributes:o}=t,l=["crsg-flipcard",`crsg-flipcard-${o.flipDirection}`];o.zoomOnHover&&l.push("has-zoom-on-hover");let r={};o.linkUrl&&(r={href:o.linkUrl,target:o.linkTarget,title:o.linkTitle,rel:o.linkRel});const a=G.save({className:l.join(" "),...r});return(0,e.createElement)((t=>t.isLink?(0,e.createElement)("a",{...t},t.children):(0,e.createElement)("div",{...t},t.children)),{isLink:o.linkUrl&&o.linkUrl.length>0,...a},(0,e.createElement)("div",{className:"crsg-flipcard-container"},(0,e.createElement)(q.Content,null)))}})})();